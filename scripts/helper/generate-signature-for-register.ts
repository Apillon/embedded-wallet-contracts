import { ethers } from "ethers";
import hre from "hardhat";

async function main() {

  const signer = (await hre.ethers.getSigners())[0];
  
  const gasPrice = "100000000000";
  const gasLimit = "1000000";
  const timestamp = 1718793580;
  const gaslessData = "0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000002080263e0f29e73a5eb8f1c11c0d0757991495ede3b964c10dfe6de2e2d0e078c800000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000002fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff90000000000000000000000000000000000000000000000000000000000000001609bd33404510e345e88fb0e5ff126d4b4d7b68945c372b02ac4f11597fb626ed5ab39b61cf5fe743df9f1d6896f7d32c57904c527725d7e64228692a010951f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000204b2e8bd918288cc119a068caa680dc4822054f5dcfa853749a5e070717d29815";
  
  const dataHash = ethers.solidityPackedKeccak256(
    ['uint256', 'uint64', 'uint256', 'bytes32'],
    [gasPrice, gasLimit, timestamp, ethers.keccak256(gaslessData)],
  );

  const signature = await signer.signMessage(ethers.getBytes(dataHash));

  console.log(signature);

}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
